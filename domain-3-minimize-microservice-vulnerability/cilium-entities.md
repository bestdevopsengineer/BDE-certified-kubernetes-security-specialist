#### Create 2 Pods for Testing
```sh
kubectl run nginx --image=nginx

kubectl run curl --image=alpine/curl -- sleep 36000
```

#### Entities - Cluster
```sh
nano entities-cluster.yaml
```
```sh
apiVersion: "cilium.io/v2"
kind: CiliumNetworkPolicy
metadata:
  name: "restrict-egress-to-cluster"
spec:
  endpointSelector: {}
  egress:
    - toEntities:
        - "cluster"
```
```sh
kubectl create -f entities-cluster.yaml
```

Test the Setup 

```sh
kubectl get pods -o wide

kubectl exec -it curl-pod -- sh

curl <NGINX-POD-IP>

ping google.com

curl google.com
```
```sh
kubectl delete -f entities-cluster.yaml
```
#### Entities - World

```sh
nano entities-world.yaml
```
```sh
apiVersion: "cilium.io/v2"
kind: CiliumNetworkPolicy
metadata:
  name: "restrict-egress-to-cluster"
spec:
  endpointSelector: {}
  egress:
    - toEntities:
        - "world"
```
```sh
kubectl create -f entities-world.yaml
```

Test the Setup 
```sh
kubectl get pods -o wide

kubectl exec -it curl-pod -- sh

curl <NGINX-POD-IP>
curl google.com
ping google.com
```
```sh
kubectl delete -f entities-world.yaml
```
#### Entities - All

```sh
nano entities-all.yaml
```
```sh
apiVersion: "cilium.io/v2"
kind: CiliumNetworkPolicy
metadata:
  name: "allow-all-egress"
spec:
  endpointSelector: {}
  egress:
    - toEntities:
        - "all"
```
```sh
kubectl create -f entities-all.yaml
```
Test the Setup 
```sh
kubectl get pods -o wide

kubectl exec -it curl-pod -- sh

curl <NGINX-POD-IP>

curl google.com

ping google.com
```
```sh
kubectl delete -f entities-all.yaml
```

#### Delete the Resources Created for this Lab
```sh
kubectl delelte pods --all
```