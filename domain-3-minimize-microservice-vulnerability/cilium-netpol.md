#### Create 2 Pods for Testing
```sh
kubectl run nginx --image=nginx

kubectl run curl --image=alpine=curl
```
#### Verify the connectivity
```sh
kubectl get pods -o wide

kubectl exec -it curl -- sh

curl <NGINX-IP>
```

### Example 1 - Deny Policy for Specific Pod
```sh
nano deny.yaml
```
```sh
apiVersion: "cilium.io/v2"
kind: CiliumNetworkPolicy
metadata:
  name: "deny-traffic"
spec:
  endpointSelector:
    matchLabels:
      run: curl
  ingress:
    - {}
  egress:
    - {}
```
```sh
kubectl create -f deny.yaml

kubectl get ciliumnetworkpolicies
```
#### Testing 1 - Deny Policy
```sh
kubectl exec -it curl -- sh

curl <NGINX-IP>
```

### Example 2 - Allow Traffic from Curl Pod to Nginx Pod

```sh
nano allow-curl-pod.yaml
```
```sh
apiVersion: "cilium.io/v2"
kind: CiliumNetworkPolicy
metadata:
  name: allow-curl-nginx
spec:
  endpointSelector:
    matchLabels:
      run: nginx
  ingress:
    - fromEndpoints:
        - matchLabels:
            run: curl
```
```sh
kubectl create -f allow-curl-pod.yaml
```
#### Testing Policy 

```sh
kubectl exec -it curl -- sh
curl <NGINX-IP>
curl 10.0.0.129


kubectl run random-pod --image=alpine/curl -- sleep 36000
kubectl exec -it random-pod -- sh
curl <NGINX-IP>
```
kubectl delete -f allow-curl-pod.yaml