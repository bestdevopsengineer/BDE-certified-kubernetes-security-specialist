#### Create Base Pods and Service
```sh
kubectl run nginx-1 --image=nginx

kubectl expose pod nginx-1 --port=80 --name=nginx-service --target-port=80

kubectl run curl-pod --image=alpine/curl --command -- sleep infinity
```

#### Create CNP
```sh
nano cnp-service.yaml
```
```sh
apiVersion: "cilium.io/v2"
kind: CiliumNetworkPolicy
metadata:
  name: allow-curl-to-nginx-service
spec:
  endpointSelector:
    matchLabels:
      run: curl-pod
  egress:
  - toServices:
    - k8sService:
        serviceName: nginx-service
        namespace: default 
    toPorts:
    - ports:
      - port: "80" 
        protocol: TCP
```
```sh
kubectl create -f cnp-service.yaml
```
#### Testing
```sh
kubectl exec curl-pod -- curl <NGINX-SERVICE-IP>
```

